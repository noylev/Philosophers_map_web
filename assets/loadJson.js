var philosophers = {
  "rows" : [
    {
      "itemLabel" : "Vilfredo Pareto",
      "_coordinates" : "Point(2.351827777 48.856577777)",
      "date_of_birth" : "1848-07-15T00:00:00Z",
      "date_of_death" : "1923-08-19T00:00:00Z",
      "place_of_birthLabel" : "Paris",
      "sex_or_genderLabel" : "male",
      "religion" : null,
      "time_periodLabel" : null,
      "place_of_deathLabel" : "Céligny",
      "manner_of_deathLabel" : null,
      "country_of_citizenshipLabel" : "France",
      "languages_spoken__written_or_signedLabel" : "French",
      "main_subjectLabel" : null,
      "_image" : "http://commons.wikimedia.org/wiki/Special:FilePath/Vilfredo%20Pareto%201870s2.jpg"
    },
    {
      "itemLabel" : "Vincenzo Gioberti",
      "_coordinates" : "Point(7.7 45.066666666)",
      "date_of_birth" : "1801-04-05T00:00:00Z",
      "date_of_death" : "1852-10-26T00:00:00Z",
      "place_of_birthLabel" : "Turin",
      "sex_or_genderLabel" : "male",
      "religion" : null,
      "time_periodLabel" : null,
      "place_of_deathLabel" : "Paris",
      "manner_of_deathLabel" : null,
      "country_of_citizenshipLabel" : "Kingdom of Sardinia",
      "languages_spoken__written_or_signedLabel" : "Italian",
      "main_subjectLabel" : null,
      "_image" : "http://commons.wikimedia.org/wiki/Special:FilePath/Vincenzo%20Gioberti%20iii.jpg"
    },
    {
      "itemLabel" : "Vinoba Bhave",
      "_coordinates" : "Point(72.82 18.96)",
      "date_of_birth" : "1895-09-11T00:00:00Z",
      "date_of_death" : "1982-11-15T00:00:00Z",
      "place_of_birthLabel" : "Maharashtra",
      "sex_or_genderLabel" : "male",
      "religion" : null,
      "time_periodLabel" : null,
      "place_of_deathLabel" : "Wardha",
      "manner_of_deathLabel" : null,
      "country_of_citizenshipLabel" : "India",
      "languages_spoken__written_or_signedLabel" : null,
      "main_subjectLabel" : null,
      "_image" : "http://commons.wikimedia.org/wiki/Special:FilePath/Gandhi%20and%20Vinoba.jpg"
    },
    {
      "itemLabel" : "Virchand Gandhi",
      "_coordinates" : "Point(71.8 21.0833)",
      "date_of_birth" : "1864-08-25T00:00:00Z",
      "date_of_death" : "1901-08-07T00:00:00Z",
      "place_of_birthLabel" : "Mahuva",
      "sex_or_genderLabel" : "male",
      "religion" : null,
      "time_periodLabel" : null,
      "place_of_deathLabel" : "Mumbai",
      "manner_of_deathLabel" : null,
      "country_of_citizenshipLabel" : "British Raj",
      "languages_spoken__written_or_signedLabel" : null,
      "main_subjectLabel" : null,
      "_image" : "http://commons.wikimedia.org/wiki/Special:FilePath/Virachand%20Raghavji%20Gandhi.jpg"
    },
    {
      "itemLabel" : "Vittorio HÃ¶sle",
      "_coordinates" : "Point(9.190336 45.464161)",
      "date_of_birth" : "1960-06-25T00:00:00Z",
      "date_of_death" : "Alive",
      "place_of_birthLabel" : "Milan",
      "sex_or_genderLabel" : "male",
      "religion" : null,
      "time_periodLabel" : null,
      "place_of_deathLabel" : null,
      "manner_of_deathLabel" : null,
      "country_of_citizenshipLabel" : "Italy",
      "languages_spoken__written_or_signedLabel" : "German",
      "main_subjectLabel" : null,
      "_image" : "http://commons.wikimedia.org/wiki/Special:FilePath/Vhoesle.jpg"
    },
    {
      "itemLabel" : "Vladimir Dal",
      "_coordinates" : "Point(39.333333333 48.583333333)",
      "date_of_birth" : "1801-11-22T00:00:00Z",
      "date_of_death" : "1872-10-04T00:00:00Z",
      "place_of_birthLabel" : "Luhansk",
      "sex_or_genderLabel" : "male",
      "religion" : null,
      "time_periodLabel" : null,
      "place_of_deathLabel" : "Moscow",
      "manner_of_deathLabel" : null,
      "country_of_citizenshipLabel" : "Russian Empire",
      "languages_spoken__written_or_signedLabel" : "Russian",
      "main_subjectLabel" : null,
      "_image" : "http://commons.wikimedia.org/wiki/Special:FilePath/1872.%20%D0%9F%D0%BE%D1%80%D1%82%D1%80%D0%B5%D1%82%20%D0%BF%D0%B8%D1%81%D0%B0%D1%82%D0%B5%D0%BB%D1%8F%20%D0%92%D0%BB%D0%B0%D0%B4%D0%B8%D0%BC%D0%B8%D1%80%D0%B0%20%D0%98%D0%B2%D0%B0%D0%BD%D0%BE%D0%B2%D0%B8%D1%87%D0%B0%20%D0%94%D0%B0%D0%BB%D1%8F.jpg"
    },
    {
      "itemLabel" : "Vladimir Lenin",
      "_coordinates" : "Point(48.366666666 54.316666666)",
      "date_of_birth" : "1870-04-22T00:00:00Z",
      "date_of_death" : "1924-01-21T00:00:00Z",
      "place_of_birthLabel" : "Ulyanovsk",
      "sex_or_genderLabel" : "male",
      "religion" : null,
      "time_periodLabel" : null,
      "place_of_deathLabel" : "Gorki Leninskiye",
      "manner_of_deathLabel" : "natural causes",
      "country_of_citizenshipLabel" : "Soviet Union",
      "languages_spoken__written_or_signedLabel" : "Russian",
      "main_subjectLabel" : null,
      "_image" : "http://commons.wikimedia.org/wiki/Special:FilePath/Bundesarchiv%20Bild%20183-71043-0003%2C%20Wladimir%20Iljitsch%20Lenin.jpg"
    },
    {
      "itemLabel" : "Vladimir Solovyov",
      "_coordinates" : "Point(37.617777777 55.755833333)",
      "date_of_birth" : "1853-01-28T00:00:00Z",
      "date_of_death" : "1900-08-13T00:00:00Z",
      "place_of_birthLabel" : "Moscow",
      "sex_or_genderLabel" : "male",
      "religion" : null,
      "time_periodLabel" : null,
      "place_of_deathLabel" : "Uzkoye",
      "manner_of_deathLabel" : null,
      "country_of_citizenshipLabel" : "Russian Empire",
      "languages_spoken__written_or_signedLabel" : "Russian",
      "main_subjectLabel" : null,
      "_image" : "http://commons.wikimedia.org/wiki/Special:FilePath/V.Solovyov.jpg"
    },
    {
      "itemLabel" : "Voltaire",
      "_coordinates" : "Point(2.351827777 48.856577777)",
      "date_of_birth" : "1694-11-21T00:00:00Z",
      "date_of_death" : "1778-05-30T00:00:00Z",
      "place_of_birthLabel" : "Paris",
      "sex_or_genderLabel" : "male",
      "religion" : null,
      "time_periodLabel" : null,
      "place_of_deathLabel" : "Paris",
      "manner_of_deathLabel" : null,
      "country_of_citizenshipLabel" : "France",
      "languages_spoken__written_or_signedLabel" : "French",
      "main_subjectLabel" : null,
      "_image" : "http://commons.wikimedia.org/wiki/Special:FilePath/Atelier%20de%20Nicolas%20de%20Largilli%C3%A8re%2C%20portrait%20de%20Voltaire%2C%20d%C3%A9tail%20%28mus%C3%A9e%20Carnavalet%29%20-002.jpg"
    },
    {
      "itemLabel" : "Vyacheslav Ivanovich Ivanov",
      "_coordinates" : "Point(37.617777777 55.755833333)",
      "date_of_birth" : "1866-02-28T00:00:00Z",
      "date_of_death" : "1949-07-16T00:00:00Z",
      "place_of_birthLabel" : "Moscow",
      "sex_or_genderLabel" : "male",
      "religion" : null,
      "time_periodLabel" : null,
      "place_of_deathLabel" : "Rome",
      "manner_of_deathLabel" : null,
      "country_of_citizenshipLabel" : "Italy",
      "languages_spoken__written_or_signedLabel" : "Italian",
      "main_subjectLabel" : null,
      "_image" : "http://commons.wikimedia.org/wiki/Special:FilePath/Vyacheslav%20Ivanov%2C%201900.jpg"
    },
    {
      "itemLabel" : "Walter Johannes Stein",
      "_coordinates" : "Point(16.373064 48.20833)",
      "date_of_birth" : "1891-01-01T00:00:00Z",
      "date_of_death" : "1957-01-01T00:00:00Z",
      "place_of_birthLabel" : "Vienna",
      "sex_or_genderLabel" : "male",
      "religion" : null,
      "time_periodLabel" : null,
      "place_of_deathLabel" : "London",
      "manner_of_deathLabel" : null,
      "country_of_citizenshipLabel" : "Austria",
      "languages_spoken__written_or_signedLabel" : "German",
      "main_subjectLabel" : null,
      "_image" : "http://commons.wikimedia.org/wiki/Special:FilePath/Stein-Walter%20Johannes-2.jpg"
    },
    {
      "itemLabel" : "Walter Mignolo",
      "_coordinates" : "Point(-62.2 -33.28333333)",
      "date_of_birth" : "1941-01-01T00:00:00Z",
      "date_of_death" : "Alive",
      "place_of_birthLabel" : "Corral de Bustos",
      "sex_or_genderLabel" : "male",
      "religion" : null,
      "time_periodLabel" : null,
      "place_of_deathLabel" : null,
      "manner_of_deathLabel" : null,
      "country_of_citizenshipLabel" : "Argentina",
      "languages_spoken__written_or_signedLabel" : "English",
      "main_subjectLabel" : null,
      "_image" : "http://commons.wikimedia.org/wiki/Special:FilePath/Wmignolo.JPG"
    },
    {
      "itemLabel" : "Wang Yangming",
      "_coordinates" : "Point(121.549166666 29.875)",
      "date_of_birth" : "1472-11-09T00:00:00Z",
      "date_of_death" : "1529-01-19T00:00:00Z",
      "place_of_birthLabel" : "Ningbo",
      "sex_or_genderLabel" : "male",
      "religion" : null,
      "time_periodLabel" : null,
      "place_of_deathLabel" : null,
      "manner_of_deathLabel" : null,
      "country_of_citizenshipLabel" : "Ming dynasty",
      "languages_spoken__written_or_signedLabel" : "Chinese",
      "main_subjectLabel" : null,
      "_image" : "http://commons.wikimedia.org/wiki/Special:FilePath/Wang-yang-ming.jpg"
    },
    {
      "itemLabel" : "Werner Janssen",
      "_coordinates" : "Point(6.433333333 51.2)",
      "date_of_birth" : "1944-01-01T00:00:00Z",
      "date_of_death" : "Alive",
      "place_of_birthLabel" : "MÃ¶nchengladbach",
      "sex_or_genderLabel" : "male",
      "religion" : null,
      "time_periodLabel" : null,
      "place_of_deathLabel" : null,
      "manner_of_deathLabel" : null,
      "country_of_citizenshipLabel" : "Germany",
      "languages_spoken__written_or_signedLabel" : "German",
      "main_subjectLabel" : null,
      "_image" : "http://commons.wikimedia.org/wiki/Special:FilePath/Werner%20Janssen%20pli.jpg"
    },
    {
      "itemLabel" : "Werner Rolfinck",
      "_coordinates" : "Point(10.0 53.55)",
      "date_of_birth" : "1599-11-15T00:00:00Z",
      "date_of_death" : "1673-05-06T00:00:00Z",
      "place_of_birthLabel" : "Hamburg",
      "sex_or_genderLabel" : "male",
      "religion" : null,
      "time_periodLabel" : null,
      "place_of_deathLabel" : "Jena",
      "manner_of_deathLabel" : null,
      "country_of_citizenshipLabel" : "Germany",
      "languages_spoken__written_or_signedLabel" : "German",
      "main_subjectLabel" : null,
      "_image" : "http://commons.wikimedia.org/wiki/Special:FilePath/WernerRolfinck.jpg"
    },
    {
      "itemLabel" : "Wilhelm Gottlieb Tennemann",
      "_coordinates" : "Point(11.266666666 51.116666666)",
      "date_of_birth" : "1761-12-07T00:00:00Z",
      "date_of_death" : "1819-09-30T00:00:00Z",
      "place_of_birthLabel" : "Kleinbrembach",
      "sex_or_genderLabel" : "male",
      "religion" : null,
      "time_periodLabel" : null,
      "place_of_deathLabel" : "Marburg",
      "manner_of_deathLabel" : null,
      "country_of_citizenshipLabel" : "Germany",
      "languages_spoken__written_or_signedLabel" : "German",
      "main_subjectLabel" : null,
      "_image" : "http://commons.wikimedia.org/wiki/Special:FilePath/Wilhelm%20Gottlieb%20Tennemann%20%281761-1819%29.jpg"
    },
    {
      "itemLabel" : "Wilhelm Reich",
      "_coordinates" : "Point(24.525 49.564722222)",
      "date_of_birth" : "1897-03-24T00:00:00Z",
      "date_of_death" : "1957-11-03T00:00:00Z",
      "place_of_birthLabel" : "Dobrianychi",
      "sex_or_genderLabel" : "male",
      "religion" : null,
      "time_periodLabel" : null,
      "place_of_deathLabel" : "Union County",
      "manner_of_deathLabel" : "natural causes",
      "country_of_citizenshipLabel" : "United States of America",
      "languages_spoken__written_or_signedLabel" : "German",
      "main_subjectLabel" : null,
      "_image" : "http://commons.wikimedia.org/wiki/Special:FilePath/Wilhelm%20Reich%20in%20his%20mid-twenties.JPG"
    },
    {
      "itemLabel" : "Wilhelm von Humboldt",
      "_coordinates" : "Point(13.066666666 52.4)",
      "date_of_birth" : "1767-06-22T00:00:00Z",
      "date_of_death" : "1835-04-08T00:00:00Z",
      "place_of_birthLabel" : "Potsdam",
      "sex_or_genderLabel" : "male",
      "religion" : null,
      "time_periodLabel" : null,
      "place_of_deathLabel" : "Berlin",
      "manner_of_deathLabel" : null,
      "country_of_citizenshipLabel" : "Germany",
      "languages_spoken__written_or_signedLabel" : "French",
      "main_subjectLabel" : null,
      "_image" : "http://commons.wikimedia.org/wiki/Special:FilePath/WilhelmvonHumboldt.jpg"
    },
    {
      "itemLabel" : "Wilhelm Weischedel",
      "_coordinates" : "Point(8.679722222 50.113611111)",
      "date_of_birth" : "1905-04-11T00:00:00Z",
      "date_of_death" : "1975-08-20T00:00:00Z",
      "place_of_birthLabel" : "Frankfurt",
      "sex_or_genderLabel" : "male",
      "religion" : null,
      "time_periodLabel" : null,
      "place_of_deathLabel" : "Berlin",
      "manner_of_deathLabel" : null,
      "country_of_citizenshipLabel" : "Germany",
      "languages_spoken__written_or_signedLabel" : "German",
      "main_subjectLabel" : null,
      "_image" : "http://commons.wikimedia.org/wiki/Special:FilePath/Portrait%20Weischedel.jpg"
    },
    {
      "itemLabel" : "Wilhelm Windelband",
      "_coordinates" : "Point(13.066666666 52.4)",
      "date_of_birth" : "1848-05-11T00:00:00Z",
      "date_of_death" : "1915-10-22T00:00:00Z",
      "place_of_birthLabel" : "Potsdam",
      "sex_or_genderLabel" : "male",
      "religion" : null,
      "time_periodLabel" : null,
      "place_of_deathLabel" : "Heidelberg",
      "manner_of_deathLabel" : null,
      "country_of_citizenshipLabel" : "Germany",
      "languages_spoken__written_or_signedLabel" : "German",
      "main_subjectLabel" : null,
      "_image" : "http://commons.wikimedia.org/wiki/Special:FilePath/Wilhelm%20Windelband.jpg"
    },
    {
      "itemLabel" : "Wilhelm Wundt",
      "_coordinates" : "Point(8.490919444 49.453511111)",
      "date_of_birth" : "1832-08-16T00:00:00Z",
      "date_of_death" : "1920-08-31T00:00:00Z",
      "place_of_birthLabel" : "Neckarau",
      "sex_or_genderLabel" : "male",
      "religion" : null,
      "time_periodLabel" : null,
      "place_of_deathLabel" : "GroÃŸbothen",
      "manner_of_deathLabel" : null,
      "country_of_citizenshipLabel" : "Germany",
      "languages_spoken__written_or_signedLabel" : "German",
      "main_subjectLabel" : null,
      "_image" : "http://commons.wikimedia.org/wiki/Special:FilePath/Wilhelm%20Wundt.jpg"
    },
    {
      "itemLabel" : "Will Durant",
      "_coordinates" : "Point(-73.109166666 42.700833333)",
      "date_of_birth" : "1885-11-05T00:00:00Z",
      "date_of_death" : "1981-11-07T00:00:00Z",
      "place_of_birthLabel" : "North Adams",
      "sex_or_genderLabel" : "male",
      "religion" : null,
      "time_periodLabel" : null,
      "place_of_deathLabel" : "Los Angeles",
      "manner_of_deathLabel" : null,
      "country_of_citizenshipLabel" : "United States of America",
      "languages_spoken__written_or_signedLabel" : "English",
      "main_subjectLabel" : null,
      "_image" : "http://commons.wikimedia.org/wiki/Special:FilePath/William%20and%20Ariel%20Durant.jpg"
    },
    {
      "itemLabel" : "Will Kymlicka",
      "_coordinates" : "Point(-81.2497 42.9837)",
      "date_of_birth" : "1962-01-01T00:00:00Z",
      "date_of_death" : "Alive",
      "place_of_birthLabel" : "London",
      "sex_or_genderLabel" : "male",
      "religion" : null,
      "time_periodLabel" : null,
      "place_of_deathLabel" : null,
      "manner_of_deathLabel" : null,
      "country_of_citizenshipLabel" : "Canada",
      "languages_spoken__written_or_signedLabel" : "English",
      "main_subjectLabel" : null,
      "_image" : "http://commons.wikimedia.org/wiki/Special:FilePath/Will%20kymlicka.JPG"
    },
    {
      "itemLabel" : "William of Ockham",
      "_coordinates" : "Point(-0.461 51.298)",
      "date_of_birth" : "1285-01-01T00:00:00Z",
      "date_of_death" : "1349-04-17T00:00:00Z",
      "place_of_birthLabel" : "Ockham",
      "sex_or_genderLabel" : "male",
      "religion" : null,
      "time_periodLabel" : null,
      "place_of_deathLabel" : "Munich",
      "manner_of_deathLabel" : null,
      "country_of_citizenshipLabel" : "Kingdom of England",
      "languages_spoken__written_or_signedLabel" : "Latin",
      "main_subjectLabel" : null,
      "_image" : "http://commons.wikimedia.org/wiki/Special:FilePath/William%20of%20Ockham.png"
    },
    {
      "itemLabel" : "William Petty",
      "_coordinates" : "Point(-1.4966 50.989)",
      "date_of_birth" : "1623-05-26T00:00:00Z",
      "date_of_death" : "1687-12-16T00:00:00Z",
      "place_of_birthLabel" : "Romsey",
      "sex_or_genderLabel" : "male",
      "religion" : null,
      "time_periodLabel" : null,
      "place_of_deathLabel" : "London",
      "manner_of_deathLabel" : null,
      "country_of_citizenshipLabel" : "United Kingdom",
      "languages_spoken__written_or_signedLabel" : "English",
      "main_subjectLabel" : null,
      "_image" : "http://commons.wikimedia.org/wiki/Special:FilePath/Sir%20William%20Petty.%20Mezzotint%20by%20J.%20Smith%2C%201696%2C%20after%20J.%20Clo%20Wellcome%20V0004638.jpg"
    },
    {
      "itemLabel" : "William Stanley Jevons",
      "_coordinates" : "Point(-3.0 53.416666666)",
      "date_of_birth" : "1835-09-01T00:00:00Z",
      "date_of_death" : "1882-08-13T00:00:00Z",
      "place_of_birthLabel" : "Liverpool",
      "sex_or_genderLabel" : "male",
      "religion" : null,
      "time_periodLabel" : null,
      "place_of_deathLabel" : "Bexhill",
      "manner_of_deathLabel" : null,
      "country_of_citizenshipLabel" : "United Kingdom of Great Britain and Ireland",
      "languages_spoken__written_or_signedLabel" : "English",
      "main_subjectLabel" : null,
      "_image" : "http://commons.wikimedia.org/wiki/Special:FilePath/Jevons.jpeg"
    },
    {
      "itemLabel" : "William Whewell",
      "_coordinates" : "Point(-2.801 54.047)",
      "date_of_birth" : "1794-05-24T00:00:00Z",
      "date_of_death" : "1866-03-06T00:00:00Z",
      "place_of_birthLabel" : "Lancaster",
      "sex_or_genderLabel" : "male",
      "religion" : null,
      "time_periodLabel" : null,
      "place_of_deathLabel" : "Cambridge",
      "manner_of_deathLabel" : null,
      "country_of_citizenshipLabel" : "United Kingdom of Great Britain and Ireland",
      "languages_spoken__written_or_signedLabel" : "English",
      "main_subjectLabel" : null,
      "_image" : "http://commons.wikimedia.org/wiki/Special:FilePath/William%20Whewell%20-%20Project%20Gutenberg%20eText%2013103.jpg"
    },
    {
      "itemLabel" : "Wole Soyinka",
      "_coordinates" : "Point(3.35 7.15)",
      "date_of_birth" : "1934-07-13T00:00:00Z",
      "date_of_death" : "Alive",
      "place_of_birthLabel" : "Abeokuta",
      "sex_or_genderLabel" : "male",
      "religion" : null,
      "time_periodLabel" : null,
      "place_of_deathLabel" : null,
      "manner_of_deathLabel" : null,
      "country_of_citizenshipLabel" : "Nigeria",
      "languages_spoken__written_or_signedLabel" : "English",
      "main_subjectLabel" : null,
      "_image" : "http://commons.wikimedia.org/wiki/Special:FilePath/Soyinka%2C%20Wole%20%281934%29.jpg"
    },
    {
      "itemLabel" : "Wolfgang Harich",
      "_coordinates" : "Point(20.516666666 54.716666666)",
      "date_of_birth" : "1923-12-09T00:00:00Z",
      "date_of_death" : "1995-03-15T00:00:00Z",
      "place_of_birthLabel" : "Königsberg",
      "sex_or_genderLabel" : "male",
      "religion" : null,
      "time_periodLabel" : null,
      "place_of_deathLabel" : "Berlin",
      "manner_of_deathLabel" : null,
      "country_of_citizenshipLabel" : "Germany",
      "languages_spoken__written_or_signedLabel" : "German",
      "main_subjectLabel" : null,
      "_image" : "http://commons.wikimedia.org/wiki/Special:FilePath/Bundesarchiv%20Bild%20183-40377-0007%2C%20Weimar%2C%20Heinrich-Heine-Tagung%2C%20Dr.%20Wolfgang%20Harich.jpg"
    },
    {
      "itemLabel" : "Wolfgang Rautenberg",
      "_coordinates" : "Point(13.066666666 52.4)",
      "date_of_birth" : "1936-02-27T00:00:00Z",
      "date_of_death" : "2011-09-04T00:00:00Z",
      "place_of_birthLabel" : "Potsdam",
      "sex_or_genderLabel" : "male",
      "religion" : null,
      "time_periodLabel" : null,
      "place_of_deathLabel" : "Berlin",
      "manner_of_deathLabel" : null,
      "country_of_citizenshipLabel" : "Germany",
      "languages_spoken__written_or_signedLabel" : "German",
      "main_subjectLabel" : null,
      "_image" : "http://commons.wikimedia.org/wiki/Special:FilePath/Wolfgang%20Rautenberg.jpg"
    },
    {
      "itemLabel" : "Yaron Brook",
      "_coordinates" : "Point(35.0 31.0)",
      "date_of_birth" : "1961-05-23T00:00:00Z",
      "date_of_death" : "Alive",
      "place_of_birthLabel" : "Israel",
      "sex_or_genderLabel" : "male",
      "religion" : null,
      "time_periodLabel" : null,
      "place_of_deathLabel" : null,
      "manner_of_deathLabel" : null,
      "country_of_citizenshipLabel" : "United States of America",
      "languages_spoken__written_or_signedLabel" : null,
      "main_subjectLabel" : null,
      "_image" : "http://commons.wikimedia.org/wiki/Special:FilePath/Yaron%20Brook%20at%20Tea%20Party%20Patriots.jpg"
    },
    {
      "itemLabel" : "Yeznik of Kolb",
      "_coordinates" : "Point(44.95 41.166666666)",
      "date_of_birth" : "0380-01-01T00:00:00Z",
      "date_of_death" : "0450-01-01T00:00:00Z",
      "place_of_birthLabel" : "Koghb",
      "sex_or_genderLabel" : "male",
      "religion" : null,
      "time_periodLabel" : null,
      "place_of_deathLabel" : null,
      "manner_of_deathLabel" : null,
      "country_of_citizenshipLabel" : null,
      "languages_spoken__written_or_signedLabel" : "Armenian",
      "main_subjectLabel" : null,
      "_image" : "http://commons.wikimedia.org/wiki/Special:FilePath/Eznik%20Koghbatsi.jpg"
    },
    {
      "itemLabel" : "Yi Hwang",
      "_coordinates" : "Point(128.725 36.565555555)",
      "date_of_birth" : "1501-01-01T00:00:00Z",
      "date_of_death" : "1570-01-01T00:00:00Z",
      "place_of_birthLabel" : "Andong",
      "sex_or_genderLabel" : "male",
      "religion" : null,
      "time_periodLabel" : null,
      "place_of_deathLabel" : null,
      "manner_of_deathLabel" : null,
      "country_of_citizenshipLabel" : "Joseon",
      "languages_spoken__written_or_signedLabel" : "Korean",
      "main_subjectLabel" : null,
      "_image" : "http://commons.wikimedia.org/wiki/Special:FilePath/Statue%20of%20Yi%20Hwang.jpg"
    },
    {
      "itemLabel" : "Yi I",
      "_coordinates" : "Point(128.896111111 37.755555555)",
      "date_of_birth" : "1536-12-26T00:00:00Z",
      "date_of_death" : "1584-01-01T00:00:00Z",
      "place_of_birthLabel" : "Gangneung",
      "sex_or_genderLabel" : "male",
      "religion" : null,
      "time_periodLabel" : null,
      "place_of_deathLabel" : null,
      "manner_of_deathLabel" : null,
      "country_of_citizenshipLabel" : "Joseon",
      "languages_spoken__written_or_signedLabel" : "Chinese",
      "main_subjectLabel" : null,
      "_image" : "http://commons.wikimedia.org/wiki/Special:FilePath/Sitting%20Yi%20I.jpg"
    },
    {
      "itemLabel" : "Yiannis N. Moschovakis",
      "_coordinates" : "Point(23.716111111 37.979444444)",
      "date_of_birth" : "1938-01-18T00:00:00Z",
      "date_of_death" : "Alive",
      "place_of_birthLabel" : "Athens",
      "sex_or_genderLabel" : "male",
      "religion" : null,
      "time_periodLabel" : null,
      "place_of_deathLabel" : null,
      "manner_of_deathLabel" : null,
      "country_of_citizenshipLabel" : "United States of America",
      "languages_spoken__written_or_signedLabel" : "Modern Greek",
      "main_subjectLabel" : null,
      "_image" : "http://commons.wikimedia.org/wiki/Special:FilePath/Yiannis%20Moschovakis.jpg"
    },
    {
      "itemLabel" : "Yun Hyu",
      "_coordinates" : "Point(127.0 37.583333333)",
      "date_of_birth" : "1617-10-14T00:00:00Z",
      "date_of_death" : "1680-05-20T00:00:00Z",
      "place_of_birthLabel" : "Seoul",
      "sex_or_genderLabel" : "male",
      "religion" : null,
      "time_periodLabel" : null,
      "place_of_deathLabel" : "Seoul",
      "manner_of_deathLabel" : null,
      "country_of_citizenshipLabel" : "Joseon",
      "languages_spoken__written_or_signedLabel" : null,
      "main_subjectLabel" : null,
      "_image" : "http://commons.wikimedia.org/wiki/Special:FilePath/Yunhyu.jpg"
    },
    {
      "itemLabel" : "Yuri Lotman",
      "_coordinates" : "Point(30.316666666 59.95)",
      "date_of_birth" : "1922-02-28T00:00:00Z",
      "date_of_death" : "1993-10-28T00:00:00Z",
      "place_of_birthLabel" : "Saint Petersburg",
      "sex_or_genderLabel" : "male",
      "religion" : null,
      "time_periodLabel" : null,
      "place_of_deathLabel" : "Tartu",
      "manner_of_deathLabel" : null,
      "country_of_citizenshipLabel" : "Russia",
      "languages_spoken__written_or_signedLabel" : "Russian",
      "main_subjectLabel" : null,
      "_image" : "http://commons.wikimedia.org/wiki/Special:FilePath/Yuri%20Lotman.%20Portrait.%201980.jpg"
    },
    {
      "itemLabel" : "Zhelyu Zhelev",
      "_coordinates" : "Point(27.013055555 43.063888888)",
      "date_of_birth" : "1935-03-03T00:00:00Z",
      "date_of_death" : "2015-01-30T00:00:00Z",
      "place_of_birthLabel" : "Smyadovo",
      "sex_or_genderLabel" : "male",
      "religion" : null,
      "time_periodLabel" : null,
      "place_of_deathLabel" : "Sofia",
      "manner_of_deathLabel" : null,
      "country_of_citizenshipLabel" : "Bulgaria",
      "languages_spoken__written_or_signedLabel" : "Bulgarian",
      "main_subjectLabel" : null,
      "_image" : "http://commons.wikimedia.org/wiki/Special:FilePath/Zhelyu-Zhelev-20090423.jpg"
    },
    {
      "itemLabel" : "Zhu Xi",
      "_coordinates" : "Point(102.54222 24.355)",
      "date_of_birth" : "1130-10-25T00:00:00Z",
      "date_of_death" : "1200-04-30T00:00:00Z",
      "place_of_birthLabel" : "Yuxi",
      "sex_or_genderLabel" : "male",
      "religion" : null,
      "time_periodLabel" : null,
      "place_of_deathLabel" : null,
      "manner_of_deathLabel" : null,
      "country_of_citizenshipLabel" : "Song dynasty",
      "languages_spoken__written_or_signedLabel" : "Chinese",
      "main_subjectLabel" : null,
      "_image" : "http://commons.wikimedia.org/wiki/Special:FilePath/Zhu%20xi.jpg"
    },
    {
      "itemLabel" : "Aristides of Athens",
      "_coordinates" : "Point(23.716111111 37.979444444)",
      "date_of_birth" : null,
      "date_of_death" : "0134-01-01T00:00:00Z",
      "place_of_birthLabel" : "Athens",
      "sex_or_genderLabel" : "male",
      "religion" : null,
      "time_periodLabel" : null,
      "place_of_deathLabel" : "Athens",
      "manner_of_deathLabel" : null,
      "country_of_citizenshipLabel" : null,
      "languages_spoken__written_or_signedLabel" : null,
      "main_subjectLabel" : null,
      "_image" : "http://commons.wikimedia.org/wiki/Special:FilePath/Aristides.jpg"
    }
  ]
}

var geocoder;
var map;
var bounds = new google.maps.LatLngBounds();


function initialize() {
	let philos = filterData();
	console.log(philos);
  map = new google.maps.Map(document.getElementById("map_canvas"), {
      center: new google.maps.LatLng(37.4419, -122.1419),
      zoom: 13,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });
  geocoder = new google.maps.Geocoder();
  for (i = 0; i < philos.length; i++)
    geocodeAddress(philos, i);
}

function geocodeAddress(philosophers, i) {
  let title = philosophers[i].itemLabel;
  let address = philosophers[i].place_of_birthLabel;
  let url = philosophers[i]._image;
  geocoder.geocode({'address': philosophers[i].place_of_birthLabel},
    (results, status) => {
      if (status == google.maps.GeocoderStatus.OK) {
        let marker = new google.maps.Marker({
          icon: 'http://maps.google.com/mapfiles/ms/icons/blue.png',
          map: map,
          position: results[0].geometry.location,
          title: title,
          // animation: google.maps.Animation.DROP,
          address: address,
          url: url
        });
        infoWindow(marker, map, title, address, url);
        bounds.extend(marker.getPosition());
        map.fitBounds(bounds);
      }else if(status === google.maps.GeocoderStatus.OVER_QUERY_LIMIT) {
        console.log("TEST");
            setTimeout(function() {
                geocodeAddress(philosophers, i);
            }, 50);
      }else{
        alert("geocode of " + address + " failed:" + status);
      }
    });
}

function infoWindow(marker, map, title, address, url) {
  google.maps.event.addListener(marker, 'click', function() {
    let html = "<div><h3>" + title + "</h3><p>" + address + "<br></div><a href='" + url + "'>View location</a></p></div>";
    iw = new google.maps.InfoWindow({
      content: html,
      maxWidth: 350
    });
    iw.open(map, marker);
  });
}

function createMarker(results) {
  var marker = new google.maps.Marker({
    icon: 'http://maps.google.com/mapfiles/ms/icons/blue.png',
    map: map,
    position: results[0].geometry.location,
    title: title,
    animation: google.maps.Animation.DROP,
    address: address,
    url: url
  })
  bounds.extend(marker.getPosition());
  map.fitBounds(bounds);
  infoWindow(marker, map, title, address, url);
  return marker;
}

function filterData(){
	let fullData = philosophers.rows;
	let alive = document.getElementById('aliveCheckbox').checked;
	let dead = document.getElementById('deadCheckbox').checked;
	let male = document.getElementById('maleCheckbox').checked;
	let female = document.getElementById('femaleCheckbox').checked;
	let nationality = document.getElementById('philoNation').value;
	let language = document.getElementById('philoLang').value;
	let startYear = document.getElementById('fromYearRange').value;
	let endYear = document.getElementById('toYearRange').value;

	//filter by dead/alive
	if((!dead && alive ) || (dead && !alive)){
		if(alive){
			fullData = fullData.filter( row => row.date_of_death == 'Alive');
		}else{
			fullData = fullData.filter( row => row.date_of_death != 'Alive')
		}
	}
	//filter male/female
	if((!male && female ) || (male && !female)){
		if(male){
			fullData = fullData.filter( row => row.sex_or_genderLabel == 'male');
		}else{
			fullData = fullData.filter( row => row.sex_or_genderLabel != 'female')
		}
	}
	//filter nationality
	if(nationality != 'All')
		fullData = fullData.filter( row => row.country_of_citizenshipLabel == nationality)
	//filter language
	if(language != 'All')
		fullData = fullData.filter( row => row.languages_spoken__written_or_signedLabel == language)

	// console.log(JSON.stringify(fullData));
	
	fullData = fullData.filter( row => {
		if(row.date_of_birth != null ){
			let birthDate = row.date_of_birth.split("-");
			let birthYear = birthDate[0] == "" ? -Math.abs(birthDate[1]) : Math.abs(birthDate[0]);
			return  (startYear <= birthYear) && (birthYear <= endYear);
		}else{
			console.log(row);
		}
	});
  return fullData;
}

google.maps.event.addDomListener(window, "load", initialize);
